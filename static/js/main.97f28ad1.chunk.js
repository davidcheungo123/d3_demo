(this.webpackJsonpscmp=this.webpackJsonpscmp||[]).push([[0],{185:function(t,e,n){},187:function(t,e,n){},189:function(t,e,n){"use strict";n.r(e);var r=n(9),a=n.n(r),i=n(90),o=n.n(i),c=(n(185),n(7)),l=n.n(c),s=n(91),u=n(47),p=n(8),g=n(1),d=n(190),h=n(191),f=(n(187),n(3));var m=function(){var t=Object(r.useRef)(),e=Object(r.useState)(null),n=Object(p.a)(e,2),a=(n[0],n[1]),i=Object(r.useState)(null),o=Object(p.a)(i,2),c=o[0],m=o[1],j=Object(r.useState)("population"),b=Object(p.a)(j,2),x=b[0],v=b[1],O=Object(r.useState)(null),y=Object(p.a)(O,2),w=y[0],H=y[1],_={marginTop:30,marginBottom:30,marginLeft:30,marginRight:30,width:500,height:500,mapWidth:600,mapHeight:600};_.ctrWidth=_.width-_.marginLeft-_.marginRight,_.ctrHeight=_.height-_.marginTop-_.marginBottom;var W=30,k=g.l("#svg1").attr("height",_.height).attr("width",800).attr("transform","translate(".concat(_.marginLeft,",").concat(_.marginTop,")")),D=g.l("#tooltip"),A=function(t){k.selectAll("*").remove();var e=Object(u.a)({},t);delete e["% Women"],delete e.Delegation,delete e.Men,delete e.Women,delete e.Total,delete e.lat,delete e.lng;var n=Object.values(e);console.log(n);var r=g.i().domain(["2011","2012","2013","2014","2015","2016","2017","2018","2019","2020"]).range([0,_.ctrWidth]),a=g.i().domain([0,1,2,3,4,5,6,7,8,9]).range([0,_.ctrWidth]),i=g.j().domain([0,g.g(n)]).range([_.ctrHeight,0]),o=g.j().domain([0,g.g(n)]).range([0,_.ctrHeight]),c=g.a(r),l=g.b(i),s=k.append("g").call(c).style("transform","translate(".concat(110,"px,",_.ctrHeight,"px)")),p=k.append("g").call(l).style("transform","translate(".concat(110,"px, ",0,"px)"));s.append("text").attr("x",_.ctrWidth/2).attr("y",_.marginBottom).attr("fill","black").text("Years").style("font-weight","bold"),p.append("text").attr("x",-40).attr("y",_.ctrHeight/2).attr("fill","black").text("Pop.(10k)").style("font-weight","bold"),k.append("g").style("transform","translate(".concat(110,"px,",0,"px)")).selectAll("rect").data(n).join((function(t){return t.append("rect").attr("width",(function(t){return W})).attr("height",0).attr("x",(function(t,e){return a(e)})).attr("y",_.ctrHeight).attr("fill","#37A4DE")}),(function(t){return t}),(function(t){return t.attr("fill","#f39233").transition().attr("y",_.ctrHeight).attr("height",0).remove()})).transition().attr("height",(function(t){return o(t)})).attr("width",W).attr("x",(function(t,e){return _.ctrWidth*e/10+(_.ctrWidth/10-W)/2})).attr("y",(function(t){return _.ctrHeight-o(t)}))};return Object(r.useEffect)((function(){(function(){var t=Object(s.a)(l.a.mark((function t(){var e,n,r,i,o,c,s,u,p;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g.c("population_info.csv",(function(t){return t=(t=Object.entries(t)).map((function(t){t[0].startsWith("Population")&&(t[0]=t[0].replace("Population","").trim()),t[1]=t[1].replaceAll(",","");var e=parseFloat(t[1]);return isNaN(e)?[t[0],t[1]]:[t[0],e]})),Object.fromEntries(t)}));case 2:return e=t.sent,t.next=5,g.c("gross_china.csv",(function(t){var e=Object.entries(t);return e=e.map((function(t){t[1].includes(",")&&(t[1]=t[1].replaceAll(",",""));var e=parseFloat(t[1]);return isNaN(e)?[t[0],t[1]]:[t[0],e]})),Object.fromEntries(e)}));case 5:return n=t.sent,console.log("data_gross:",n),H(n),t.next=10,g.f("/chinaGeo.json");case 10:r=t.sent,i=d.a().scale(550).center([105,38]).translate([_.mapWidth/2,_.mapHeight/2]),console.log(r.features),o=h.a(i),c=g.h((function(t){return g.e(t)}),r.features.length),s=g.k().domain(g.d(e,(function(t){return t[2020]}))).range(c),u=e.map((function(t){return{name:t.Delegation,lat:parseFloat(t.lat),log:parseFloat(t.lng)}})),(p=g.l("#svg").attr("width",_.mapWidth).attr("height",_.mapHeight)).selectAll("path").data(r.features).enter().append("path").attr("d",o).attr("fill",(function(t,n){return s(e.find((function(e){return e.Delegation.toLowerCase()===t.properties.name.toLowerCase()}))[2020])})).attr("stroke","rgba(0, 0, 0, 1").attr("stroke-width",1),p.selectAll(".location").data(u).enter().append("g").attr("class","location").attr("transform",(function(t){var e=i([t.log,t.lat]);return"translate("+e[0]+","+e[1]+")"})).append("circle").attr("r",4).attr("fill","#e91e63").attr("class","location"),m(e),a(e.map((function(t){return t.Delegation})));case 23:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[]),g.l("#metric").on("change",(function(t){var e=this;t.preventDefault();var n=c.find((function(t){return t.Delegation===e.value}));A(n)})),g.l("#svg").selectAll(".location").on("touchmouse mousemove",(function(t){var e=c.find((function(e){return e.Delegation===t.target.__data__.name}));t.stopPropagation(),D.style("left",t.x+20+"px").style("top",t.y+"px").style("opacity",1),g.l(this).select("circle").transition().duration(150).attr("r",8),D.select("#country").text("Country: ".concat(t.target.__data__.name)).style("color","black"),D.select("#population").text("Population in 2020: ".concat(e[2020])).style("color","black"),D.select("#percentage").text("2010-2020 change: ".concat(Math.round(100*(e[2020]-e[2011])/e[2011],2),"%")).style("color","black")})).on("mouseout",(function(t){t.stopPropagation(),D.style("opacity",0),g.l(this).select("circle").transition().duration(150).attr("r",4)})).on("click",(function(t){t.stopPropagation(),console.log("this is onClick event",t),"population"===x?A(c.find((function(e){return e.Delegation===t.target.__data__.name}))):function(t){k.selectAll("*").remove();var e=Object(u.a)({},t);delete e.Region;var n=Object.values(e),r=g.i().domain(["2011","2012","2013","2014","2015","2016","2017","2018","2019","2020"]).range([0,_.ctrWidth]),a=g.i().domain([0,1,2,3,4,5,6,7,8,9]).range([0,_.ctrWidth]),i=g.j().domain([0,g.g(n)]).range([_.ctrHeight,0]),o=g.j().domain([0,g.g(n)]).range([0,_.ctrHeight]),c=g.a(r),l=g.b(i),s=k.append("g").call(c).style("transform","translate(".concat(110,"px,",_.ctrHeight,"px)")),p=k.append("g").call(l).style("transform","translate(".concat(110,"px, ",0,"px)"));s.append("text").attr("x",_.ctrWidth/2).attr("y",_.marginBottom).attr("fill","black").text("Years").style("font-weight","bold"),p.append("text").attr("x",-40).attr("y",_.ctrHeight/2).attr("fill","black").text("Gross").style("font-weight","bold"),k.append("g").style("transform","translate(".concat(110,"px,",0,"px)")).selectAll("rect").data(n).join((function(t){return t.append("rect").attr("width",(function(t){return W})).attr("height",0).attr("x",(function(t,e){return a(e)})).attr("y",_.ctrHeight).attr("fill","#37A4DE")}),(function(t){return t}),(function(t){return t.attr("fill","#f39233").transition().attr("y",_.ctrHeight).attr("height",0).remove()})).transition().attr("height",(function(t){return o(t)})).attr("width",W).attr("x",(function(t,e){return _.ctrWidth*e/10+(_.ctrWidth/10-W)/2})).attr("y",(function(t){return _.ctrHeight-o(t)}))}(w.find((function(e){return e.Region.toLowerCase()===t.target.__data__.name.toLowerCase()})))})),Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("p",{children:"Here is the title for the graphic"}),Object(f.jsxs)("select",{onChange:function(t){t.preventDefault(),console.log(t.target.value),v(t.target.value)},children:[Object(f.jsx)("option",{value:"population",selected:"selected",children:"population"}),Object(f.jsx)("option",{value:"gross",children:"gross"})]}),Object(f.jsxs)("div",{id:"container",children:[Object(f.jsxs)("div",{id:"world",children:[Object(f.jsx)("svg",{id:"svg"}),Object(f.jsxs)("div",{id:"tooltip",children:[Object(f.jsx)("span",{id:"country"}),Object(f.jsx)("br",{}),Object(f.jsx)("span",{id:"population"}),Object(f.jsx)("br",{}),Object(f.jsx)("span",{id:"percentage"})]})]}),Object(f.jsx)("div",{id:"world-map",children:Object(f.jsx)("svg",{ref:t,id:"svg1"})})]})]})},j=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,192)).then((function(e){var n=e.getCLS,r=e.getFID,a=e.getFCP,i=e.getLCP,o=e.getTTFB;n(t),r(t),a(t),i(t),o(t)}))};o.a.render(Object(f.jsx)(a.a.StrictMode,{children:Object(f.jsx)(m,{})}),document.getElementById("root")),j()}},[[189,1,2]]]);
//# sourceMappingURL=main.97f28ad1.chunk.js.map