(this.webpackJsonpscmp=this.webpackJsonpscmp||[]).push([[0],{12:function(t,e,n){},14:function(t,e,n){},16:function(t,e,n){"use strict";n.r(e);var a=n(1),r=n.n(a),i=n(6),o=n.n(i),c=(n(12),n(4)),l=n.n(c),d=n(7),s=n(5),w=n(2),u=(n(14),n(0));var p=function(){var t=Object(a.useRef)();console.log(window.window);var e=Object(a.useState)(null),n=Object(w.a)(e,2),r=(n[0],n[1]),i=Object(a.useState)(null),o=Object(w.a)(i,2),c=o[0],p=o[1],g=Object(a.useState)("population"),h=Object(w.a)(g,2),f=h[0],m=h[1],x=Object(a.useState)(null),j=Object(w.a)(x,2),b=j[0],v=j[1],O={marginTop:30,marginBottom:30,marginLeft:30,marginRight:30,width:500,height:500,mapWidth:600,mapHeight:600};O.ctrWidth=O.width-O.marginLeft-O.marginRight,O.ctrHeight=O.height-O.marginTop-O.marginBottom;var y=30,H=window.window.d3.select("#svg1").attr("height",O.height).attr("width",800).attr("transform","translate(".concat(O.marginLeft,",").concat(O.marginTop,")")),_=window.window.d3.select("#tooltip"),W=function(t){H.selectAll("*").remove();var e=Object(s.a)({},t);delete e["% Women"],delete e.Delegation,delete e.Men,delete e.Women,delete e.Total,delete e.lat,delete e.lng;var n=Object.values(e);console.log(n);var a=window.window.d3.scaleBand().domain(["2011","2012","2013","2014","2015","2016","2017","2018","2019","2020"]).range([0,O.ctrWidth]),r=window.window.d3.scaleBand().domain([0,1,2,3,4,5,6,7,8,9]).range([0,O.ctrWidth]),i=window.window.d3.scaleLinear().domain([0,window.window.d3.max(n)]).range([O.ctrHeight,0]),o=window.window.d3.scaleLinear().domain([0,window.window.d3.max(n)]).range([0,O.ctrHeight]),c=window.window.d3.axisBottom(a),l=window.window.d3.axisLeft(i),d=H.append("g").call(c).style("transform","translate(".concat(110,"px,",O.ctrHeight,"px)")),w=H.append("g").call(l).style("transform","translate(".concat(110,"px, ",0,"px)"));d.append("text").attr("x",O.ctrWidth/2).attr("y",O.marginBottom).attr("fill","black").text("Years").style("font-weight","bold"),w.append("text").attr("x",-40).attr("y",O.ctrHeight/2).attr("fill","black").text("Pop.(10k)").style("font-weight","bold"),H.append("g").style("transform","translate(".concat(110,"px,",0,"px)")).selectAll("rect").data(n).join((function(t){return t.append("rect").attr("width",(function(t){return y})).attr("height",0).attr("x",(function(t,e){return r(e)})).attr("y",O.ctrHeight).attr("fill","#37A4DE")}),(function(t){return t}),(function(t){return t.attr("fill","#f39233").transition().attr("y",O.ctrHeight).attr("height",0).remove()})).transition().attr("height",(function(t){return o(t)})).attr("width",y).attr("x",(function(t,e){return O.ctrWidth*e/10+(O.ctrWidth/10-y)/2})).attr("y",(function(t){return O.ctrHeight-o(t)}))};return Object(a.useEffect)((function(){(function(){var t=Object(d.a)(l.a.mark((function t(){var e,n,a,i,o,c,d,s,w;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,window.window.d3.csv("population_info.csv",(function(t){return t=(t=Object.entries(t)).map((function(t){t[0].startsWith("Population")&&(t[0]=t[0].replace("Population","").trim()),t[1]=t[1].replaceAll(",","");var e=parseFloat(t[1]);return isNaN(e)?[t[0],t[1]]:[t[0],e]})),Object.fromEntries(t)}));case 2:return e=t.sent,t.next=5,window.window.d3.csv("gross_china.csv",(function(t){var e=Object.entries(t);return e=e.map((function(t){t[1].includes(",")&&(t[1]=t[1].replaceAll(",",""));var e=parseFloat(t[1]);return isNaN(e)?[t[0],t[1]]:[t[0],e]})),Object.fromEntries(e)}));case 5:return n=t.sent,console.log("data_gross:",n),v(n),t.next=10,window.window.d3.json("/chinaGeo.json");case 10:a=t.sent,i=window.window.d3.geoMercator().scale(550).center([105,38]).translate([O.mapWidth/2,O.mapHeight/2]),console.log(a.features),o=window.window.d3.geoPath(i),c=window.window.d3.quantize((function(t){return window.window.d3.interpolateOranges(t)}),a.features.length),d=window.window.d3.scaleQuantize().domain(window.window.d3.extent(e,(function(t){return t[2020]}))).range(c),s=e.map((function(t){return{name:t.Delegation,lat:parseFloat(t.lat),log:parseFloat(t.lng)}})),(w=window.window.d3.select("#svg").attr("width",O.mapWidth).attr("height",O.mapHeight)).selectAll("path").data(a.features).enter().append("path").attr("d",o).attr("fill",(function(t,n){return d(e.find((function(e){return e.Delegation.toLowerCase()===t.properties.name.toLowerCase()}))[2020])})).attr("stroke","rgba(0, 0, 0, 1").attr("stroke-width",1),w.selectAll(".location").data(s).enter().append("g").attr("class","location").attr("transform",(function(t){var e=i([t.log,t.lat]);return"translate("+e[0]+","+e[1]+")"})).append("circle").attr("r",4).attr("fill","#e91e63").attr("class","location"),p(e),r(e.map((function(t){return t.Delegation})));case 23:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[]),window.window.d3.select("#metric").on("change",(function(t){var e=this;t.preventDefault();var n=c.find((function(t){return t.Delegation===e.value}));W(n)})),window.window.d3.select("#svg").selectAll(".location").on("touchmouse mousemove",(function(t){var e=c.find((function(e){return e.Delegation===t.target.__data__.name}));t.stopPropagation(),_.style("left",t.x+20+"px").style("top",t.y+"px").style("opacity",1),window.window.d3.select(this).select("circle").transition().duration(150).attr("r",8),_.select("#country").text("Country: ".concat(t.target.__data__.name)).style("color","black"),_.select("#population").text("Population in 2020: ".concat(e[2020])).style("color","black"),_.select("#percentage").text("2010-2020 change: ".concat(Math.round(100*(e[2020]-e[2011])/e[2011],2),"%")).style("color","black")})).on("mouseout",(function(t){t.stopPropagation(),_.style("opacity",0),window.window.d3.select(this).select("circle").transition().duration(150).attr("r",4)})).on("click",(function(t){t.stopPropagation(),console.log("this is onClick event",t),"population"===f?W(c.find((function(e){return e.Delegation===t.target.__data__.name}))):function(t){H.selectAll("*").remove();var e=Object(s.a)({},t);delete e.Region;var n=Object.values(e),a=window.window.d3.scaleBand().domain(["2011","2012","2013","2014","2015","2016","2017","2018","2019","2020"]).range([0,O.ctrWidth]),r=window.window.d3.scaleBand().domain([0,1,2,3,4,5,6,7,8,9]).range([0,O.ctrWidth]),i=window.window.d3.scaleLinear().domain([0,window.window.d3.max(n)]).range([O.ctrHeight,0]),o=window.window.d3.scaleLinear().domain([0,window.window.d3.max(n)]).range([0,O.ctrHeight]),c=window.window.d3.axisBottom(a),l=window.window.d3.axisLeft(i),d=H.append("g").call(c).style("transform","translate(".concat(110,"px,",O.ctrHeight,"px)")),w=H.append("g").call(l).style("transform","translate(".concat(110,"px, ",0,"px)"));d.append("text").attr("x",O.ctrWidth/2).attr("y",O.marginBottom).attr("fill","black").text("Years").style("font-weight","bold"),w.append("text").attr("x",-40).attr("y",O.ctrHeight/2).attr("fill","black").text("Gross").style("font-weight","bold"),H.append("g").style("transform","translate(".concat(110,"px,",0,"px)")).selectAll("rect").data(n).join((function(t){return t.append("rect").attr("width",(function(t){return y})).attr("height",0).attr("x",(function(t,e){return r(e)})).attr("y",O.ctrHeight).attr("fill","#37A4DE")}),(function(t){return t}),(function(t){return t.attr("fill","#f39233").transition().attr("y",O.ctrHeight).attr("height",0).remove()})).transition().attr("height",(function(t){return o(t)})).attr("width",y).attr("x",(function(t,e){return O.ctrWidth*e/10+(O.ctrWidth/10-y)/2})).attr("y",(function(t){return O.ctrHeight-o(t)}))}(b.find((function(e){return e.Region.toLowerCase()===t.target.__data__.name.toLowerCase()})))})),Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("p",{children:"Here is the title for the graphic"}),Object(u.jsxs)("select",{onChange:function(t){t.preventDefault(),console.log(t.target.value),m(t.target.value)},children:[Object(u.jsx)("option",{value:"population",selected:"selected",children:"population"}),Object(u.jsx)("option",{value:"gross",children:"gross"})]}),Object(u.jsxs)("div",{id:"container",children:[Object(u.jsxs)("div",{id:"world",children:[Object(u.jsx)("svg",{id:"svg"}),Object(u.jsxs)("div",{id:"tooltip",children:[Object(u.jsx)("span",{id:"country"}),Object(u.jsx)("br",{}),Object(u.jsx)("span",{id:"population"}),Object(u.jsx)("br",{}),Object(u.jsx)("span",{id:"percentage"})]})]}),Object(u.jsx)("div",{id:"world-map",children:Object(u.jsx)("svg",{ref:t,id:"svg1"})})]})]})},g=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,17)).then((function(e){var n=e.getCLS,a=e.getFID,r=e.getFCP,i=e.getLCP,o=e.getTTFB;n(t),a(t),r(t),i(t),o(t)}))};o.a.render(Object(u.jsx)(r.a.StrictMode,{children:Object(u.jsx)(p,{})}),document.getElementById("root")),g()}},[[16,1,2]]]);
//# sourceMappingURL=main.c800856c.chunk.js.map